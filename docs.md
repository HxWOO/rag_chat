# [MVP] Haas 매뉴얼 Q&A 챗봇 요구사항 정의서 (AWS Serverless)

| **문서 버전** | v2.0 (Serverless AWS MVP) |
| :--- | :--- |
| **작성일** | 2025년 11월 16일 |
| **작성자** | (담당자명) |
| **프로젝트명** | 'Haas 매뉴얼' Q&A 챗봇 AWS Serverless MVP |
| **프로젝트 기간** | 2주 (구현, AWS 배포 및 테스트 포함) |

---

### 1. 개요

#### 1.1 프로젝트 배경

현장 작업자가 'Haas 밀 운영자 매뉴얼'의 정보를 찾는 데 소요되는 시간을 단축하고, 수동 검색의 비효율성을 개선하고자 함.

#### 1.2 프로젝트 목적

**AWS 서버리스 환경(S3, Lambda, Bedrock, OpenSearch)** 에서 RAG(증강 검색) 파이프라인을 성공적으로 구축하고, 'Haas 매뉴얼' 1권에 대한 사용자의 자연어 질문에 신뢰할 수 있는 근거(출처)를 포함한 답변을 제공하는 것을 목적으로 함.

**주요 검증 목표:**
* **기술 검증 (AWS):** 제시된 AWS 서버리스 아키텍처를 2주 내에 구축하고 End-to-End로 작동시킬 수 있는가?
* **기술 검증 (RAG):** Bedrock과 OpenSearch 기반 RAG가 'Haas 매뉴얼'의 내용을 정확하게 검색하고 답변을 생성할 수 있는가?
* **가치 검증:** 사용자가 챗봇을 통해 정보를 얻는 것이 기존 방식보다 더 빠르고 유용하다고 느끼는가?

#### 1.3 범위 정의 (Scope)

**In-Scope (포함 범위)**
* **데이터:** 사전 지정된 단일 PDF ('Haas 밀 운영자 매뉴얼')
* **아키텍처:** S3, Lambda (2개), Amazon Bedrock (Titan Embedding, Claude), Amazon OpenSearch Serverless, API Gateway 사용
* **임베딩 파이프라인:** PDF 청킹, 임베딩, OpenSearch 저장 (Lambda 1)
* **쿼리 파이프라인:** API Gateway 수신, 쿼리 임베딩, 검색, LLM 답변 생성 (Lambda 2)
* **UI:** Streamlit을 사용한 최소 기능의 웹 UI (EC2 또는 S3/CloudFront 배포)
* **핵심 기능:** 자연어 질의응답 및 답변 근거(페이지 번호) 제시

**Out-of-Scope (제외 범위)**
* 다중 문서 동시 검색 및 비교 분석
* 사용자 인증(로그인) 및 권한 관리 (IAM Role 외)
* 대화형 맥락(Chat History) 기억 기능
* Amazon OpenSearch 외 다른 벡터 DB 사용

---

### 2. 요구사항 정의

#### 2.1 아키텍처 요구사항 (필수)

| ID | 요구사항 명 | 상세 설명 |
| :--- | :--- | :--- |
| AR-001 | AWS 서버리스 아키텍처 | 시스템은 반드시 S3, Lambda, Amazon Bedrock, Amazon OpenSearch Serverless, API Gateway를 기반으로 구축되어야 한다. |
| AR-002 | 최소 권한 원칙 | 모든 AWS 리소스 간의 상호작용은 **IAM Role**을 통해 최소한의 필요 권한(예: Lambda가 S3를 읽고 OpenSearch에 쓰는 권한)만 가져야 한다. |

#### 2.2 기능 요구사항 (Functional Requirements)

| ID | 요구사항 명 | 상세 설명 |
| :--- | :--- | :--- |
| FR-001 | (관리자) 문서 수집 | 관리자(개발자)는 'Haas 매뉴얼' PDF를 지정된 S3 버킷에 업로드해야 한다. |
| FR-002 | (시스템) 임베딩 파이프라인 | (Lambda 1) PDF를 청킹(Chunking)하고, Bedrock(Titan)을 호출해 임베딩한 후, 텍스트/벡터/메타데이터(페이지 번호)를 OpenSearch에 저장해야 한다. |
| FR-003 | (사용자) 질문 입력 | 사용자는 Streamlit UI의 텍스트 입력창을 통해 질문을 자연어로 입력해야 한다. |
| FR-004 | (시스템) API 엔드포인트 | 시스템은 UI로부터 질문을 수신할 수 있는 API Gateway 엔드포인트를 제공해야 한다. |
| FR-005 | (시스템) 쿼리 파이프라인 | (Lambda 2) 수신된 질문을 Bedrock(Titan)으로 임베딩하고, OpenSearch에서 관련 청크를 검색한 뒤, Bedrock(Claude)을 호출하여 답변과 출처를 생성해야 한다. |
| FR-006 | (시스템) 응답 포맷 | Lambda 2는 UI가 파싱하기 쉽도록 JSON 형태(예: `{"answer": "...", "source": "Page 78"}`)로 답변을 반환해야 한다. |
| FR-007 | (사용자) 결과 확인 | 사용자는 UI 화면에서 질문에 대한 답변과 근거 출처를 명확하게 확인할 수 있어야 한다. |

#### 2.3 비기능 요구사항 (Non-Functional Requirements)

| ID | 구분 | 상세 설명 |
| :--- | :--- | :--- |
| NFR-001 | 성능 | 사용자가 UI에서 질문을 제출한 후, 최종 답변을 받기까지의 총 시간은 15초 이내여야 한다. (API Gateway, Lambda, Bedrock, OpenSearch 총합) |
| NFR-002 | 정확성 (핵심) | **(환각 방지)** 시스템은 OpenSearch에서 검색된 컨텍스트(매뉴얼 내용)에 존재하지 않는 정보를 생성해서는 안 된다. 정보가 없을 경우, "매뉴얼에서 관련 정보를 찾을 수 없습니다."라고 답변해야 한다. <br/> **(출처 정확성)** 답변의 근거로 제시된 페이지 번호가 실제 매뉴얼 내용과 일치해야 한다. |
| NFR-003 | 사용성 | UI는 기능 테스트를 위한 최소한의 요소(입력창, 전송 버튼, 결과창)로 구성되며, 직관적으로 사용할 수 있어야 한다. |
| NFR-004 | 보안 | Bedrock API Key 등 민감 정보는 Lambda 코드에 하드코딩하지 않고 환경 변수 또는 Secrets Manager를 통해 관리한다. (IAM Role 사용 권장) |

---

### 3. MVP 테스트 및 성공 기준

#### 3.1 테스트 시나리오 (예시)

| 시나리오 ID | 사용자 질문 예시 (Haas 매뉴얼 기반) | 기대 답변 (요약) | 기대 출처 (예시) |
| :--- | :--- | :--- | :--- |
| TC-001 | "Alarm 101이 무슨 뜻이야?" | "서보 모터 과부하를 의미합니다..." | "매뉴얼 [Alarm] 섹션 (예: 402p)" |
| TC-002 | "스핀들 오일 교체 방법 알려줘." | "1. 주 전원 차단, 2. 드레인 플러그 개방..." | "매뉴얼 [Maintenance] 섹션 (예: 215p)" |
| TC-003 | "G01 코드가 뭐야?" | "선형 보간(Linear Interpolation) 코드입니다." | "매뉴얼 [G-Codes] 섹션 (예: 110p)" |
| TC-004 | (정보 없음) "이 기계 재고 언제 들어와?" | "관련 정보를 매뉴얼에서 찾을 수 없습니다." | (출처 없음) |

#### 3.2 MVP 성공 기준 (Acceptance Criteria)

1.  **[AWS]** 서버리스 아키텍처(S3~Lambda~Bedrock~OpenSearch~API Gateway~UI)가 End-to-End로 완전히 작동하는가?
2.  **[RAG]** 상기 테스트 시나리오(TC-001~003)의 **기대 답변 및 기대 출처**가 80% 이상 일치하는가?
3.  **[RAG]** 존재하지 않는 정보(TC-004)에 대해 환각(Hallucination) 없이 **정보 없음**을 명확히 응답하는가?
4.  **[Value]** 현장 작업자(테스터)가 실제 매뉴얼을 찾는 것보다 **챗봇을 이용하는 것이 더 빠르고 유용하다고 주관적으로 동의**하는가?